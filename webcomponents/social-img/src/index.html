<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" components="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>DeckDeckGo</title>

    <script type="module" src="/build/social-img.esm.js"></script>
    <script nomodule src="/build/social-img.js"></script>
  </head>
  <body>
    <deckgo-social-img
      text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vitae ornare purus. Fusce lacinia dolor vitae aliquet faucibus.
       Cras fermentum viverra odio. Nunc erat ex, tempor vel sem elementum, volutpat tempus mauris. Duis vel laoreet nisl, et cursus
        ex. Maecenas rutrum lorem purus, in auctor orci euismod non."
      img-src="https://deckdeckgo-studio-staging.web.app/assets/icons/deckdeckgo.svg"
    >
    </deckgo-social-img>

    <button>To image</button>

    <script>
      const toBlob = async () => {
        const socialImg = document.querySelector('deckgo-social-img');
        const blob = await socialImg?.toBlob();

        download(blob);
      };

      const download = (blob) => {
        const blobURL = window.URL.createObjectURL(blob);

        const link = document.createElement('a');
        link.href = blobURL;
        link.download = `deckdeckgo.webp`;
        link.click();

        window.URL.revokeObjectURL(blobURL);
      };

      document.addEventListener(
        'DOMContentLoaded',
        () => {
          const btn = document.querySelector('button');
          btn?.addEventListener('click', toBlob);
        },
        {once: true}
      );
    </script>
  </body>
</html>
