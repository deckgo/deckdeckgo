name: deckdeckgo-handler
maintainer: Nicolas Mattia <nicolas@nmattia.com>
copyright: (c) 2019 David Dal Busco and Nicolas Mattia
license: AGPL-3

dependencies:
    - aeson
    - amazonka
    - amazonka-core
    - amazonka-dynamodb
    - amazonka-s3
    - amazonka-sqs
    - base
    - bytestring
    - contravariant
    - directory
    - filepath
    - firebase-login
    - hasql
    - http-client
    - http-types
    - lens
    - mime-types
    - mtl
    - pureMD5
    - random
    - servant
    - servant-server
    - servant-swagger
    - servant-swagger-ui
    - swagger2
    - text
    - unliftio
    - temporary
    - unordered-containers
    - wai
    - wai-cors
    - wai-lambda
    - tar

ghc-options:
    - -Wall

library:
    source-dirs: src

executables:

    # The AWS Lambda handler
    handler:
        main: app/Handler.hs
        dependencies:
            - deckdeckgo-handler

    # The AWS presenter
    presenter:
        main: app/Presenter.hs
        dependencies:
            - deckdeckgo-handler

    # The API
    swagger:
        main: app/Swagger.hs
        dependencies:
            - warp
            - deckdeckgo-handler
            - servant-swagger
            - servant-swagger-ui

    test:
        main: app/Test.hs
        dependencies:
            - deckdeckgo-handler
            - http-client
            - http-client-tls
            - lens
            - port-utils
            - servant-client
            - tasty
            - tasty-hunit
            - warp
